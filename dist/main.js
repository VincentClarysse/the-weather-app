(()=>{console.log(123);const e=document.getElementById("weatherform");city_array=[],e.addEventListener("submit",showweather=async e=>{e.preventdefault;const a=document.getElementById("weatherinput");let c=a.value;a.value="";const r=await fetch("http://api.openweathermap.org/data/2.5/forecast?q="+c+"&units=metric&appid=3ee1b28549d7bac27faae1a3fead6ee4"),i=await r.json();console.log(i);const o=await fetch("https://api.unsplash.com/search/photos/?query="+i.city.name+"&orientation=landscape&client_id=cATbZHJ6_nm7HLBeUTM8DCHLc9XVaQFCntGhnII42fY"),s=await o.json();console.log(s);const l=n(s);switch(i.city.name.includes("Arrondissement de")&&(i.city.name=i.city.name.split("Arrondissement de").pop()),i.cod){default:-1===city_array.indexOf(i.city.name)?t(i,s,l):console.log("already there");break;case"400":console.log("nothing here");break;case"404":console.log("not a place")}});const t=(e,t,n)=>{city_array.splice(0,0,e.city.name);const a=document.createElement("div");a.className="wrapperrow";const c=document.querySelector(".wrapper");c.insertBefore(a,c.firstChild),t.results.length>0&&(a.style.backgroundImage="linear-gradient(gainsboro, gainsboro),url("+t.results[n].urls.regular+")");const r=document.createElement("div");r.className="weatherrow",a.appendChild(r);const o=document.createElement("div");o.className="weatherback",a.appendChild(o);const s=document.createElement("p");for(s.className="weather_in",s.innerHTML="Weather in<br>"+e.city.name,o.appendChild(s),i=0,x=0;i<40;i+=8,x++){const t=document.createElement("div");t.className="weathercard",r.appendChild(t);const n=document.createElement("img");t.appendChild(n),n.src="http://openweathermap.org/img/wn/"+e.list[i].weather[0].icon+"@2x.png";const a=document.createElement("h2");t.appendChild(a),a.innerText=e.city.name;const c=document.createElement("p");t.appendChild(c),c.innerText=e.list[i].weather[0].description,c.style.fontWeight="700";const o=document.createElement("p");t.appendChild(o),o.innerText=e.list[i].main.temp+" Â°C";const s=document.createElement("p");s.className="currentday";const l=e.list[i].dt_txt;s.innerHTML=new Date(l).toLocaleDateString("en-US",{weekday:"long"}),t.appendChild(s)}};document.querySelector("#close").addEventListener("click",(()=>{const e=document.querySelector(".wrapper");for(i=0;e.children.length>0;i++)e.removeChild(e.lastChild);for(i=0;i<city_array.length;i++)city_array[i]=""}));const n=e=>{const t=[];for(i=0;i<e.results.length;i++){let n=e.results[i].width/e.results[i].height;n>2.7&&(n=0),t.push(n)}return console.log(t),t.indexOf(Math.max(...t))}})();